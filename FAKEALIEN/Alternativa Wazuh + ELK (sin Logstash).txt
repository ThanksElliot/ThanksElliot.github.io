ğŸš€ Alternativa sin Logstash: Wazuh + ELK con Filebeat y Syslog
En este enfoque, cada mÃ¡quina Linux maneja sus logs de manera local y los envÃ­a directamente a Elasticsearch usando Filebeat, sin necesidad de Logstash.

ğŸ“Œ Â¿CÃ³mo funciona?
Los logs del sistema se generan nativamente en cada mÃ¡quina Linux con Syslog (journalctl, rsyslog o syslog-ng).
Filebeat (en cada mÃ¡quina) lee los logs y los envÃ­a directamente a Elasticsearch, sin pasar por Logstash.
El plugin de Wazuh en Kibana permite visualizar los eventos de seguridad.
ğŸ”¥ Pasos para Implementarlo
1ï¸âƒ£ Configura Syslog en cada mÃ¡quina para que los logs se guarden localmente.

Si usas rsyslog, revisa que estÃ© habilitado en /etc/rsyslog.conf.
Si usas syslog-ng, configÃºralo en /etc/syslog-ng/syslog-ng.conf.
2ï¸âƒ£ Instala Filebeat en cada mÃ¡quina (en lugar de Logstash).

Descarga e instala Filebeat en cada host.
Configura Filebeat para leer los logs de Syslog, Wazuh y otros servicios.
3ï¸âƒ£ Configura Filebeat para enviar logs a Elasticsearch.

En /etc/filebeat/filebeat.yml, configura los inputs y la salida directa a Elasticsearch:
-----------------------------------------------------
  yaml
  Copiar
  Editar
  filebeat.inputs:
    - type: log
      enabled: true
      paths:
        - /var/log/syslog
        - /var/log/auth.log
        - /var/ossec/logs/alerts/alerts.json
  
  output.elasticsearch:
    hosts: ["http://tu-servidor-elasticsearch:9200"]
    username: "elastic"
    password: "tu-contraseÃ±a"
-----------------------------------------------------

Activa el mÃ³dulo de Wazuh en Filebeat:
bash
Copiar
Editar
sudo filebeat modules enable wazuh
sudo filebeat setup
sudo systemctl restart filebeat
4ï¸âƒ£ Configura Elasticsearch y Kibana para recibir los logs.

AsegÃºrate de que Elasticsearch acepta conexiones desde Filebeat.
Usa Kibana para visualizar los logs en el dashboard de Wazuh.
ğŸ’¡ Ventajas de esta ConfiguraciÃ³n
âœ… Evitas Logstash, reduciendo la carga en un servidor central.
âœ… Cada mÃ¡quina Linux maneja sus propios logs nativamente con Syslog.
âœ… Filebeat es mÃ¡s ligero y eficiente que Logstash para enviar logs a Elasticsearch.
âœ… Escalable, ya que cada mÃ¡quina envÃ­a sus logs directamente sin necesidad de un intermediario.

ğŸ“Œ ConclusiÃ³n
Si no quieres usar Logstash, la mejor alternativa es usar Filebeat en cada mÃ¡quina para enviar los logs de Syslog directamente a Elasticsearch. Esto mantiene la arquitectura distribuida y permite que cada servidor gestione sus propios logs sin depender de un servidor central de logs. ğŸš€


############################################################################################################


ğŸ“Œ Â¿QuÃ© debes hacer en cada servidor Linux?
1ï¸âƒ£ Instalar Filebeat
En Debian/Ubuntu:
bash
-----------------------------------------------------
curl -L -O https://artifacts.elastic.co/downloads/beats/filebeat/filebeat-8.x.x-amd64.deb
sudo dpkg -i filebeat-8.x.x-amd64.deb
-----------------------------------------------------

2ï¸âƒ£ Configurar Filebeat para leer los logs del sistema
Edita el archivo /etc/filebeat/filebeat.yml y habilita los logs de Syslog y Wazuh:
-----------------------------------------------------
yaml
Copiar
Editar
filebeat.inputs:
  - type: log
    enabled: true
    paths:
      - /var/log/syslog
      - /var/log/auth.log
      - /var/ossec/logs/alerts/alerts.json  # Logs de Wazuh

output.elasticsearch:
  hosts: ["http://tu-servidor-elasticsearch:9200"]
  username: "elastic"
  password: "tu-contraseÃ±a"
-----------------------------------------------------

3ï¸âƒ£ Habilitar y ejecutar Filebeat
bash
-----------------------------------------------------
sudo systemctl enable filebeat
sudo systemctl start filebeat
-----------------------------------------------------

4ï¸âƒ£ (Opcional) Activar el mÃ³dulo de Wazuh en Filebeat
bash
-----------------------------------------------------
sudo filebeat modules enable wazuh
sudo filebeat setup
sudo systemctl restart filebeat
-----------------------------------------------------
ğŸš€ Beneficios de este mÃ©todo
âœ… Cada mÃ¡quina gestiona sus propios logs con Syslog.
âœ… Filebeat es liviano y eficiente, a diferencia de Logstash.
âœ… No dependes de un servidor central de logs, los logs se envÃ­an directamente a Elasticsearch.
âœ… Escalable, puedes agregar mÃ¡s servidores sin afectar el rendimiento de un nodo central.

ğŸ’¡ ConclusiÃ³n: SÃ­, debes instalar Filebeat en cada servidor Linux, pero esto hace que el monitoreo sea mÃ¡s distribuido y eficiente. ğŸš€
